<div class="container-fluid rounded-sm mb-5">
  <div class="mb-2">
    <h3>Your Attendance Records</h3>
    <div>
      <button class="btn btn-outline-primary me-2" (click)="switchView('graph')"
              [class.active]="viewMode === 'graph'">View by Graph</button>
      <button class="btn btn-outline-primary" (click)="switchView('table')"
              [class.active]="viewMode === 'table'">View by Table</button>
    </div>
  </div>

  <div *ngIf="errorMessage" class="alert alert-danger">{{ errorMessage }}</div>

  <div *ngIf="viewMode === 'graph'">
    <canvas #attendanceChartCanvas *ngIf="attendanceRecordBody.length > 0"></canvas>
    <p *ngIf="attendanceRecordBody.length === 0 && !errorMessage">No attendance records to display in the graph.</p>
  </div>

  <div *ngIf="viewMode === 'table'">
    <table *ngIf="pagedAttendanceRecordBody.length > 0" class="table table-striped table-hover">
      <thead>
        <tr>
          <th scope="col">Date</th>
          <th scope="col">Clock In Time</th>
          <th scope="col">Clock Out Time</th>
          <th scope="col">Work Hours</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of pagedAttendanceRecordBody">
          <td>{{ record.clockInTime | date:'yyyy-MM-dd' }}</td>
          <td>{{ record.clockInTime | date: 'HH:mm:ss' }}</td>
          <td>{{ record.clockOutTime | date: 'HH:mm:ss' }}</td>
          <td>{{ record.workHours | number: '2.1-2' }}</td>
        </tr>
      </tbody>
    </table>
    <p *ngIf="attendanceRecords?.length === 0 && !errorMessage">No attendance records found.</p>
    <div *ngIf="attendanceRecords.length > pageSize" class="d-flex justify-content-center mt-3">
      <nav aria-label="Attendance Pagination">
        <ul class="pagination">
          <li class="page-item" [class.disabled]="currentPage === 1">
            <button class="page-link" (click)="changePage(currentPage - 1)">Previous</button>
          </li>
          <li class="page-item" *ngFor="let page of pages" [class.active]="page === currentPage">
            <button class="page-link" (click)="changePage(page)">{{ page }}</button>
          </li>
          <li class="page-item" [class.disabled]="currentPage === totalPages">
            <button class="page-link" (click)="changePage(currentPage + 1)">Next</button>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>